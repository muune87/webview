<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="">
    <title>헤레디움 테스트</title>
    <script type="text/javascript">
        const VERSION = "1.6"
    
        //alert("VERSION : " + VERSION);
        
        window.onload = function(){
            document.getElementById('getWifiInfo').onclick = function(e){
                window.webkit.messageHandlers.getWifiInfo.postMessage(VERSION);
                return false;
            }
            
            document.getElementById('getWifiInfo2').onclick = function(e){
                window.heredium.getWifiInfo();
                return false;
            }
            
            
            let versionInput = document.getElementById("version_input")
            versionInput.value = VERSION;       
        }
        
        // 네이티브 에서 호출할 메소드
        function getWifiInfoResult(message){
            // console.log('getWifiInfoResult : $message');
            //alert("getWifiInfoResult")
            let nativeInput = document.getElementById("native_input")
            nativeInput.value = message;
            
            if(message == ""){
                alert("앱 접근 권한이 없음");
            }else if(message == "null"){
                alert("설정된 와이파이가 없음");
            }else{
                let result = JSON.parse(message)
                alert(result.ssid + ", " + result.bssid);
            }
        }
        
        function permissionDenied(message){
            // console.log('getWifiInfoResult : $message');
            //alert("getWifiInfoResult")
            let nativeInput = document.getElementById("native_input")
            nativeInput.value = "권한 허용을 하지 않음!!(permissionDenied호출됨)";
            
        }
    </script>
</head>

<body>
    <div >
        <p>version</p>
        <input name="version_input" id="version_input" value=""/>
  
         <h3 class="">getWifiInfo(ios)</h3>
         <input class="btn-indigo" type="submit" name="send" id="getWifiInfo" value="getWifiInfo" />
        
        
         <h3 class="">getWifiInfo(android)</h3>
         <input class="btn-indigo" type="submit" name="send" id="getWifiInfo2" value="getWifiInfo" />
        
        <h2 class="">네이티브에서 입력한 내용</h2>
        <input name="native_input" id="native_input" value="" style="width:100%;"/>
  
    </div>
</body>
</html>
