<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="">
    <title>웹앱통신 테스트</title>
    <script type="text/javascript">
        const VERSION = "1.0.0 / 14"
    
        //alert("VERSION : " + VERSION);

        function isAndroid() {
            return /Android/i.test(navigator.userAgent);
        }
        
        function isiOS() {
            return /iPhone|iPad|iPod/i.test(navigator.userAgent);
        }

         window.AutoLogin = function(val, val2){
             console.log('AutoLogin token:'+val+", flag:"+val2);
         } 
         window.fcmTokenSend = function(val){
             console.log('fcmTokenSend: '+val);
         } 
         window.notiCountChange  = function(val){
             console.log('notiCountChange:  '+val);
         } 
         window.onMobileConfirmBox  = function(val){
             console.log('onMobileConfirmBox:  '+val);
         } 
          window.AutoLoginFlagSend = function(val){
             console.log('AutoLoginFlagSend:'+val);
         } 
        
        
        
        window.onload = function(){

            document.getElementById('app-link').addEventListener('click', function(event) {
                event.preventDefault(); // 기본 링크 동작 방지
            
                var appLink = "https://www.dongbanmall.com/app"; // 딥링크
            
                if (isAndroid()) {
                    // Android에서 앱 링크로 리다이렉션
                    window.location.href = appLink;
            
                    // 2초 후에 앱 스토어로 리다이렉션 (앱이 실행되지 않으면)
                    setTimeout(function() {
                        window.location.href = "https://play.google.com/store/apps/details?id=com.kodma.dongbanmall"; // Play Store 링크
                    }, 2000);
                } else if (isiOS()) {
                    // iOS에서 앱 링크로 리다이렉션
                    window.location.href = appLink;
            
                    // 2초 후에 앱 스토어로 리다이렉션 (앱이 실행되지 않으면)
                    setTimeout(function() {
                        window.location.href = "https://apps.apple.com/app/6738829721"; // App Store 링크
                    }, 2000);
                }
            });

            
           document.getElementById('tokenSend').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.tokenSend.postMessage('token');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.tokenSend('token'); 
                } 
                return false;
            }

            
           document.getElementById('onChangeAutoLogin').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.onChangeAutoLogin.postMessage('true');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.onChangeAutoLogin('true'); 
                } 
                return false;
            }
            
            document.getElementById('settingOpen').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.settingOpen.postMessage('');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.settingOpen(''); 
                } 
                return false;
            }

            document.getElementById('notiListOpen').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.notiListOpen.postMessage('');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.notiListOpen(''); 
                } 
                return false;
            }

            document.getElementById('fcmTokenRequest').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.fcmTokenRequest.postMessage('');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.fcmTokenRequest(''); 
                } 
                return false;
            }

            document.getElementById('putMobileAffiliatePath').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.putMobileAffiliatePath.postMessage('sbdc');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.putMobileAffiliatePath('sbdc'); 
                } 
                return false;
            }

            document.getElementById('showMobileConfirmBox').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.showMobileConfirmBox.postMessage('showMobileConfirmBox');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.showMobileConfirmBox('showMobileConfirmBox'); 
                } 
                return false;
            }

            
            document.getElementById('showMobileAlertBox').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.showMobileAlertBox.postMessage('showMobileAlertBox');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.showMobileAlertBox('showMobileAlertBox'); 
                } 
                return false;
            }

            document.getElementById('getNotiCount').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.getNotiCount.postMessage('');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.getNotiCount(''); 
                } 
                return false;
            }

            document.getElementById('AutoLoginRequest').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.AutoLoginRequest.postMessage('');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.AutoLoginRequest(''); 
                } 
                return false;
            }

            
            document.getElementById('AutoLoginFlagRequest').onclick = function(e){
                if( isiOS() ){       
                   window.webkit.messageHandlers.AutoLoginFlagRequest.postMessage('');   
                }   
                if( isAndroid() ){
                   window.dongbanmall.AutoLoginFlagRequest(''); 
                } 
                return false;
            }


            document.getElementById('reload').onclick = function(e){
                window.location.reload(true);
            }
            
        
            
            let versionInput = document.getElementById("version_input")
            versionInput.value = VERSION;       
        }
        

    </script>
</head>

<body>
    <div >
        <p>version</p>
<input type="file">
        
        <input name="version_input" id="version_input" value=""/>

       
        
        <h3>reload</h3>
        <input type="button" value="reload" id="reload"/>

        <h3>app-link</h3>
        <input type="button" value="app-link" id="app-link"/>

        <h3>tokenSend</h3>
        <input type="button" value="tokenSend" id="tokenSend"/>

        <h3>onChangeAutoLogin</h3>
        <input type="button" value="onChangeAutoLogin" id="onChangeAutoLogin"/>

        <h3>settingOpen</h3>
        <input type="button" value="settingOpen" id="settingOpen"/>

        <h3>notiListOpen</h3>
        <input type="button" value="notiListOpen" id="notiListOpen"/>

     
        <h3>fcmTokenRequest</h3>
        <input type="button" value="fcmTokenRequest" id="fcmTokenRequest"/>

        <h3>putMobileAffiliatePath</h3>
        <input type="button" value="putMobileAffiliatePath" id="putMobileAffiliatePath"/>

        <h3>showMobileConfirmBox</h3>
        <input type="button" value="showMobileConfirmBox" id="showMobileConfirmBox"/>
        
        <h3>showMobileAlertBox</h3>
        <input type="button" value="showMobileAlertBox" id="showMobileAlertBox"/>

        <h3>getNotiCount</h3>
        <input type="button" value="getNotiCount" id="getNotiCount"/>

        <h3>AutoLoginRequest</h3>
        <input type="button" value="AutoLoginRequest" id="AutoLoginRequest"/>

        <h3>AutoLoginFlagRequest</h3>
        <input type="button" value="AutoLoginFlagRequest" id="AutoLoginFlagRequest"/>

        <br/><br/>
        
        <a href="https://map.kakao.com/link/to/헤레디움,36.32557832148047,127.43545973867754" class="map-link-btn">
              대전 동구 대전로 735 (인동 74-1)
            </a>
        <br/>

        
        <br/>
         <a href="https://heredium.art/mypage/purchase/all" target="_blank" class="map-link-btn">
              링크 이동
         </a>
        <br/>
        <a href="downloads/Becoming-iOS-Developer-Roadmap-2021.pdf" download="ios-roadmap">
            PDF 다운받기
        </a>
        <p></p>
        <a href="https://muune87.github.io/webview/downloads/todos.xlsx" download="todos">
            엑셀 다운받기
        </a>
        <p></p>
        <a href="https://muune87.github.io/webview/downloads/resources.zip" download="resources">
            작은 압축파일 다운받기
        </a>
        <p></p>
    </div>
</body>
</html>
